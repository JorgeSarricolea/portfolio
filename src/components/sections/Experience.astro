---
import experiences from "@/js/objects/experiences.js";
import { formatDate, calculateDuration } from "@/js/DateFormat.js";
---

<section class="flex flex-col justify-between gap-2 mt-8">
  <h1 class="text-xl font-bold">Experience</h1>
  <div class="flex flex-col gap-4">
    {
      experiences.map((experience) => {
        // Ensure dates are in string format for formatDate and calculateDuration functions
        const startDateStr = experience.startDate.toISOString().split("T")[0];
        const endDateStr = experience.endDate
          ? experience.endDate.toISOString().split("T")[0]
          : null;

        return (
          <div>
            <div class="flex justify-between">
              <div>
                <h3 class="text-black font-bold text-xl capitalize">
                  {experience.position}
                </h3>
                <h2 class="font-bold">
                  {experience.company} | {experience.type}
                </h2>
                <div class="flex gap-2 text-sm">
                  <span>
                    {formatDate(startDateStr)} -{" "}
                    {endDateStr ? formatDate(endDateStr) : "Present"}
                    {endDateStr &&
                      ` â€¢ ${calculateDuration(startDateStr, endDateStr)}`}
                  </span>
                </div>
                <span class="text-sm">{experience.location}</span>
              </div>
              <a
                href={experience.url}
                target="_blank"
                class="hover:text-secondary h-fit"
              >
                <i class="fa-solid fa-up-right-from-square" />
              </a>
            </div>
            <p class="mt-2">{experience.description}</p>
          </div>
        );
      })
    }
  </div>
</section>
